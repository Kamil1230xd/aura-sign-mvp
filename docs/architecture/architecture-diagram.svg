<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg width="800" height="900" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <defs>
    <style>
      .box { fill: #ffffff; stroke: #333333; stroke-width: 2; }
      .layer-box { fill: #f0f0f0; stroke: #666666; stroke-width: 1; }
      .title { font-family: Arial, sans-serif; font-size: 14px; font-weight: bold; fill: #333333; }
      .subtitle { font-family: Arial, sans-serif; font-size: 12px; fill: #555555; }
      .layer-title { font-family: Arial, sans-serif; font-size: 16px; font-weight: bold; fill: #333333; }
      .arrow { fill: none; stroke: #666666; stroke-width: 2; marker-end: url(#arrowhead); }
      .component { fill: #e3f2fd; stroke: #1976d2; stroke-width: 2; }
      .storage { fill: #fff3e0; stroke: #f57c00; stroke-width: 2; }
      .worker { fill: #f3e5f5; stroke: #7b1fa2; stroke-width: 2; }
      .security { fill: #ffebee; stroke: #c62828; stroke-width: 2; }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#666666" />
    </marker>
  </defs>
  
  <!-- Title -->
  <text x="400" y="30" text-anchor="middle" class="layer-title" style="font-size: 20px;">Aura-Sign MVP Architecture</text>
  
  <!-- Layer 1: Frontend / Client -->
  <rect x="50" y="60" width="700" height="120" class="layer-box" rx="5" />
  <text x="400" y="85" text-anchor="middle" class="layer-title">Frontend Layer</text>
  
  <rect x="80" y="100" width="150" height="60" class="component" rx="3" />
  <text x="155" y="125" text-anchor="middle" class="title">Next.js Demo</text>
  <text x="155" y="145" text-anchor="middle" class="subtitle">SIWE Flow UI</text>
  
  <rect x="270" y="100" width="150" height="60" class="component" rx="3" />
  <text x="345" y="125" text-anchor="middle" class="title">React Components</text>
  <text x="345" y="145" text-anchor="middle" class="subtitle">UI Hooks</text>
  
  <rect x="460" y="100" width="150" height="60" class="component" rx="3" />
  <text x="535" y="125" text-anchor="middle" class="title">Client SDK (TS)</text>
  <text x="535" y="145" text-anchor="middle" class="subtitle">Type-safe API</text>
  
  <!-- Arrow from Frontend to Auth -->
  <line x1="400" y1="180" x2="400" y2="210" class="arrow" />
  
  <!-- Layer 2: Authentication & API -->
  <rect x="50" y="220" width="700" height="120" class="layer-box" rx="5" />
  <text x="400" y="245" text-anchor="middle" class="layer-title">Authentication & API Layer</text>
  
  <rect x="120" y="260" width="200" height="60" class="component" rx="3" />
  <text x="220" y="285" text-anchor="middle" class="title">next-auth Package</text>
  <text x="220" y="305" text-anchor="middle" class="subtitle">SIWE Verification</text>
  
  <rect x="360" y="260" width="180" height="60" class="component" rx="3" />
  <text x="450" y="285" text-anchor="middle" class="title">Iron Session</text>
  <text x="450" y="305" text-anchor="middle" class="subtitle">Secure Sessions</text>
  
  <!-- Arrow from Auth to Workers -->
  <line x1="200" y1="340" x2="200" y2="370" class="arrow" />
  <line x1="500" y1="340" x2="500" y2="370" class="arrow" />
  
  <!-- Layer 3: Workers & Orchestration -->
  <rect x="50" y="380" width="700" height="140" class="layer-box" rx="5" />
  <text x="400" y="405" text-anchor="middle" class="layer-title">Worker & Orchestration Layer</text>
  
  <rect x="80" y="420" width="180" height="70" class="worker" rx="3" />
  <text x="170" y="445" text-anchor="middle" class="title">Embedding Worker</text>
  <text x="170" y="465" text-anchor="middle" class="subtitle">BullMQ + Redis</text>
  
  <rect x="300" y="420" width="180" height="70" class="worker" rx="3" />
  <text x="390" y="445" text-anchor="middle" class="title">Trust Orchestrator</text>
  <text x="390" y="465" text-anchor="middle" class="subtitle">Scoring & Policy</text>
  
  <rect x="520" y="420" width="180" height="70" class="worker" rx="3" />
  <text x="610" y="445" text-anchor="middle" class="title">AI Verification</text>
  <text x="610" y="465" text-anchor="middle" class="subtitle">Attestation JWS</text>
  
  <!-- Arrow from Workers to Storage -->
  <line x1="400" y1="520" x2="400" y2="550" class="arrow" />
  
  <!-- Layer 4: Storage -->
  <rect x="50" y="560" width="700" height="140" class="layer-box" rx="5" />
  <text x="400" y="585" text-anchor="middle" class="layer-title">Storage Layer</text>
  
  <rect x="80" y="600" width="160" height="70" class="storage" rx="3" />
  <text x="160" y="625" text-anchor="middle" class="title">PostgreSQL</text>
  <text x="160" y="645" text-anchor="middle" class="subtitle">+ pgvector</text>
  
  <rect x="280" y="600" width="160" height="70" class="storage" rx="3" />
  <text x="360" y="625" text-anchor="middle" class="title">Redis</text>
  <text x="360" y="645" text-anchor="middle" class="subtitle">Queue + Cache</text>
  
  <rect x="480" y="600" width="160" height="70" class="storage" rx="3" />
  <text x="560" y="625" text-anchor="middle" class="title">MinIO / S3</text>
  <text x="560" y="645" text-anchor="middle" class="subtitle">Object Storage</text>
  
  <!-- Layer 5: Observability & Security -->
  <rect x="50" y="720" width="700" height="140" class="layer-box" rx="5" />
  <text x="400" y="745" text-anchor="middle" class="layer-title">Observability & Security Layer</text>
  
  <rect x="80" y="760" width="140" height="70" class="security" rx="3" />
  <text x="150" y="785" text-anchor="middle" class="title">Prometheus</text>
  <text x="150" y="805" text-anchor="middle" class="subtitle">Metrics</text>
  
  <rect x="260" y="760" width="140" height="70" class="security" rx="3" />
  <text x="330" y="785" text-anchor="middle" class="title">Grafana</text>
  <text x="330" y="805" text-anchor="middle" class="subtitle">Dashboards</text>
  
  <rect x="440" y="760" width="140" height="70" class="security" rx="3" />
  <text x="510" y="785" text-anchor="middle" class="title">CodeQL</text>
  <text x="510" y="805" text-anchor="middle" class="subtitle">Security Scan</text>
  
  <rect x="620" y="760" width="120" height="70" class="security" rx="3" />
  <text x="680" y="785" text-anchor="middle" class="title">Gitleaks</text>
  <text x="680" y="805" text-anchor="middle" class="subtitle">Secret Scan</text>
  
  <!-- Legend -->
  <text x="50" y="880" class="subtitle">Component Types:</text>
  <rect x="170" y="867" width="20" height="15" class="component" />
  <text x="195" y="879" class="subtitle">Frontend/API</text>
  <rect x="280" y="867" width="20" height="15" class="worker" />
  <text x="305" y="879" class="subtitle">Workers</text>
  <rect x="370" y="867" width="20" height="15" class="storage" />
  <text x="395" y="879" class="subtitle">Storage</text>
  <rect x="460" y="867" width="20" height="15" class="security" />
  <text x="485" y="879" class="subtitle">Observability</text>
</svg>
